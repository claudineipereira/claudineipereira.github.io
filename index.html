<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
    <title>Claudinei Pereira</title>
</head>
<body>
    <section id="header">
        <div class="content">
            <header>
                <h1>Claudinei Pereira</h1>
            </header>
        </div>
    </section>

    <section id="sec1">
        <div class="content">
            <h2>Lorem ipsum dolor sit amet consectetur adipisicing elit</h2>

            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aut optio vero 
                id expedita perferendis, nostrum vel ea possimus, reprehenderit a 
                voluptatibus recusandae maxime libero, rerum magni. Eveniet inventore 
                culpa sunt.</p>
            
            <h3>Mussum Ipsum, cacilds vidis litro abertis. Mauris nec dolor in eros commodo tempor.</h3>

            <p>Mussum Ipsum, cacilds vidis litro abertis. Admodum accumsan disputationi 
                eu sit. Vide electram sadipscing et per. Per aumento de cachacis, 
                eu reclamis. Paisis, filhis, espiritis santis. Cevadis im ampola pa 
                arma uma pindureta.</p>
        </div>
    </section>

    <section id="sec2">
        <div class="content">
            <h2>Mussum Ipsum, cacilds vidis litro abertis. Mauris nec dolor in eros commodo tempor.</h2>

            <div class="row">
                <div class="column">
                    <p>Mussum Ipsum, cacilds vidis litro abertis. Admodum accumsan 
                        disputationi eu sit. Vide electram sadipscing et per. Per 
                        aumento de cachacis, eu reclamis. Paisis, filhis, espiritis 
                        santis. Cevadis im ampola pa arma uma pindureta.</p>

                    <ul>
                        <li>Mussum Ipsum, cacilds vidis litro abertis.</li>
                        <li>Mauris nec dolor in eros commodo tempor.</li>
                        <li>Suco de cevadiss deixa as pessoas mais interessantis.</li>
                    </ul>
                </div>

                <div class="column">
                    <h3>Latest Instagram Posts</h3>
                    <div id="posts"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="footer">
        <div class="content">
            <span>Desenvolvido por<br>
                <a href="https://www.claudineipereira.com">Claudinei Pereira</a></span>
        </div>
    </section>

<script>
    async function get_posts() {
        try {
            const url = '/instagram/posts.json';
            const response = await fetch(url);
            const posts = await response.json();
            return posts;
        } catch (error) {
                console.error(error);
        }
    }

    (async function show_posts() {
        const posts = await get_posts();
        let template = `<div id="instagram">
                            {{#media}}
                                <div class="post">
                                    <img src={{url}} />
                                </div>
                            {{/media}}
                        </div>`;  
        let output = Mustache.render(template, posts);
        document.getElementById('posts').innerHTML = output;
    })()
</script>

</body>
</html>